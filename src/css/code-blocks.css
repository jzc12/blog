/* ========================== 代码块增强样式 ============================== */

/* 代码块语言标签 */
.code-block-wrapper::before {
    content: attr(data-language);
    position: absolute;
    top: 0;
    left: 16px;
    background: var(--code-language-bg);
    color: var(--code-language-text);
    padding: 4px 4px;
    border-radius: 4px;
    font-size: 6px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    z-index: 5;
    opacity: 1;
    pointer-events: none;
}


/* 悬停时显示 */
.code-block-wrapper:hover::before {
    opacity: 1;
}


/* 特定语言的颜色标识 */
.code-block-wrapper[data-language="javascript"]::before,
.code-block-wrapper[data-language="js"]::before,
.code-block-wrapper[data-language="typescript"]::before,
.code-block-wrapper[data-language="ts"]::before,
.code-block-wrapper[data-language="python"]::before,
.code-block-wrapper[data-language="java"]::before,
.code-block-wrapper[data-language="csharp"]::before,
.code-block-wrapper[data-language="c#"]::before,
.code-block-wrapper[data-language="cpp"]::before,
.code-block-wrapper[data-language="c++"]::before,
.code-block-wrapper[data-language="html"]::before,
.code-block-wrapper[data-language="css"]::before,
.code-block-wrapper[data-language="bash"]::before,
.code-block-wrapper[data-language="shell"]::before,
.code-block-wrapper[data-language="json"]::before,
.code-block-wrapper[data-language="sql"]::before {
    background: #4eaa25;
    color: #fff;
}

/* 代码块行高亮 */
.hljs.with-line-numbers .code-line.highlighted {
    background-color: var(--code-line-highlight);
    position: relative;
}

.hljs.with-line-numbers .code-line.highlighted::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: var(--primary-green);
}


@keyframes highlight-pulse {

    0%,
    100% {
        background: rgba(255, 235, 59, 0.3);
    }

    50% {
        background: rgba(255, 235, 59, 0.6);
    }
}

/* 代码块性能优化 */
.hljs.with-line-numbers {
    contain: layout style paint;
    will-change: scroll-position;
}

/* 代码块无障碍访问 */
.hljs.with-line-numbers:focus-within {
    outline: 2px solid var(--primary-green);
    outline-offset: 2px;
}

.hljs.with-line-numbers .code-line:focus {
    background-color: var(--code-line-focus);
    outline: none;
}

/* ========================== 代码颜色 ============================== */

.hljs {
    background: #dae1ef;
    color: #f0f4fc;

    --hljs-comment: #1d1f24;
    --hljs-keyword: #ff7ee5;
    --hljs-string: #233224;
    --hljs-number: #d1a5ff;
    --hljs-function: #5cb5c7;
    --hljs-class: #222e20;
    --hljs-variable: #5b1e1e;
    --hljs-operator: #6cff80;
    --hljs-built-in: #ff7777;
    --hljs-type: #67d0e5;
    --hljs-literal: #293632;
    --hljs-title: #1b3a41;
    --hljs-attr: #777b25;
    --hljs-meta: #c0c6dc;
}

[data-theme="dark"] .hljs {
    background: #4e586b;
    color: #f0f4fc;

    --hljs-comment: #4889d3;
    --hljs-keyword: #79c0ff;
    --hljs-string: #a5d6ff;
    --hljs-number: #ebd9fe;
    --hljs-function: #f8f1ff;
    --hljs-class: #7ee787;
    --hljs-variable: #ffa657;
    --hljs-operator: #79c0ff;
    --hljs-built-in: #d8c1f1;
    --hljs-type: #7ee787;
    --hljs-literal: #79c0ff;
    --hljs-title: #7ee787;
    --hljs-attr: #7ee787;
    --hljs-meta: #bacfe6;
    --mermaid-color: #8b949e;
}

/* 公共样式映射 */
.hljs-comment {
    color: var(--hljs-comment);
}

.hljs-keyword {
    color: var(--hljs-keyword);
    font-weight: bold;
}

.hljs-string {
    color: var(--hljs-string);
}

.hljs-number {
    color: var(--hljs-number);
}

.hljs-title.function_,
.hljs-function {
    color: var(--hljs-function);
}

.hljs-class {
    color: var(--hljs-class);
    text-decoration: underline dashed;
}

.hljs-operator {
    color: var(--hljs-operator);
}

.hljs-variable {
    color: var(--hljs-variable);
}

.hljs-built_in {
    color: var(--hljs-built-in);
}

.hljs-type {
    color: var(--hljs-type);
}

.hljs-literal {
    color: var(--hljs-literal);
}

.hljs-title,
.hljs-title.class_,
.hljs-title.function_ {
    color: var(--hljs-title);
}

.hljs-attr {
    color: var(--hljs-attr);
}

.hljs-meta {
    color: var(--hljs-meta);
}