import{aT as h,aU as g,aV as t,aW as x,aw as q,aX as F,aY as G,ay as W,aZ as S,a_ as X,o as _,c as d,aB as Z,a$ as H,b as o,b0 as m,aD as Y,b1 as L,b2 as V,az as T,aE as u,b3 as J,b4 as K,b5 as M,b6 as Q,b7 as ee,aA as te,b8 as ae}from"./index-23ba4857.js";import{f as se}from"./index-41cd7ac1.js";const b=h([]),N=h([]),O=h(!1),R=h(0);let B=!1;function re(){const k=async()=>{if(!B){O.value=!0,R.value=0;try{const n=Object.assign({"/src/articles/Csharp.md":()=>t(()=>import("./Csharp-9745b8e3.js"),[]).then(e=>e.default),"/src/articles/adb.md":()=>t(()=>import("./adb-655c4d63.js"),[]).then(e=>e.default),"/src/articles/实习总结.md":()=>t(()=>import("./实习总结-f0ec00d1.js"),[]).then(e=>e.default),"/src/articles/操作系统_1.md":()=>t(()=>import("./操作系统_1-5025c08c.js"),[]).then(e=>e.default),"/src/articles/操作系统_2.md":()=>t(()=>import("./操作系统_2-6dbddd73.js"),[]).then(e=>e.default),"/src/articles/操作系统_3.md":()=>t(()=>import("./操作系统_3-c96319da.js"),[]).then(e=>e.default),"/src/articles/操作系统_4.md":()=>t(()=>import("./操作系统_4-5052da3b.js"),[]).then(e=>e.default),"/src/articles/操作系统_5.md":()=>t(()=>import("./操作系统_5-99f114a8.js"),[]).then(e=>e.default),"/src/articles/数据结构_1.md":()=>t(()=>import("./数据结构_1-a024f0fd.js"),[]).then(e=>e.default),"/src/articles/数据结构_2.md":()=>t(()=>import("./数据结构_2-fc2e7c0d.js"),[]).then(e=>e.default),"/src/articles/数据结构_3.md":()=>t(()=>import("./数据结构_3-9c4715d9.js"),[]).then(e=>e.default),"/src/articles/数据结构_4.md":()=>t(()=>import("./数据结构_4-3c14e09f.js"),[]).then(e=>e.default),"/src/articles/球球了.md":()=>t(()=>import("./球球了-9a9756d3.js"),[]).then(e=>e.default),"/src/articles/线性代数和概率论.md":()=>t(()=>import("./线性代数和概率论-ced477a3.js"),[]).then(e=>e.default),"/src/articles/细碎知识.md":()=>t(()=>import("./细碎知识-e7267701.js"),[]).then(e=>e.default),"/src/articles/计算机组成_1.md":()=>t(()=>import("./计算机组成_1-ab0b6c55.js"),[]).then(e=>e.default),"/src/articles/计算机组成_2.md":()=>t(()=>import("./计算机组成_2-647377b6.js"),[]).then(e=>e.default),"/src/articles/计算机组成_3.md":()=>t(()=>import("./计算机组成_3-536706a9.js"),[]).then(e=>e.default),"/src/articles/计算机组成_4.md":()=>t(()=>import("./计算机组成_4-d370e22e.js"),[]).then(e=>e.default),"/src/articles/计算机组成_5.md":()=>t(()=>import("./计算机组成_5-f2855e27.js"),[]).then(e=>e.default),"/src/articles/计算机组成_6.md":()=>t(()=>import("./计算机组成_6-7e90215d.js"),[]).then(e=>e.default),"/src/articles/计算机网络_1.md":()=>t(()=>import("./计算机网络_1-8cc1c116.js"),[]).then(e=>e.default),"/src/articles/计算机网络_3.md":()=>t(()=>import("./计算机网络_3-f4a458f2.js"),[]).then(e=>e.default),"/src/articles/计算机网络_4.md":()=>t(()=>import("./计算机网络_4-c81ef78b.js"),[]).then(e=>e.default),"/src/articles/计算机网络_5.md":()=>t(()=>import("./计算机网络_5-339381da.js"),[]).then(e=>e.default),"/src/articles/计算机网络_6.md":()=>t(()=>import("./计算机网络_6-c1d3ec6b.js"),[]).then(e=>e.default),"/src/articles/软件系统设计.md":()=>t(()=>import("./软件系统设计-d1a813aa.js"),[]).then(e=>e.default),"/src/articles/软件质量管理_1.md":()=>t(()=>import("./软件质量管理_1-4a727575.js"),[]).then(e=>e.default),"/src/articles/软件质量管理_2.md":()=>t(()=>import("./软件质量管理_2-df69909c.js"),[]).then(e=>e.default),"/src/articles/高等数学.md":()=>t(()=>import("./高等数学-fc205294.js"),[]).then(e=>e.default)}),p=Object.keys(n),y=p.length;let E=0;const A=await Promise.all(p.map(async e=>{try{const l=await n[e](),{attributes:i,body:D}=se(l),f=e.split("/").pop().replace(".md","");return{id:f,title:i.title||f,date:i.date?x(i.date).format("YYYY-MM-DD"):i.updated?x(i.updated).format("YYYY-MM-DD"):"未知日期",category:i.category||"未分类",summary:i.summary?i.summary:D.replace(/[#>*`\-\n]/g,"").slice(0,120)+"..."}}catch(l){return console.error("文章解析失败:",e,l),null}finally{E++,R.value=Math.round(E/y*100)}}));b.value=A.filter(Boolean),B=!0;const c=[...new Set(b.value.map(e=>e.category))].sort();N.value=c}catch(n){console.error("加载文章失败:",n)}finally{O.value=!1}}},v=g(()=>[...b.value].sort((n,p)=>new Date(p.date)-new Date(n.date)));return g(()=>[...new Set(v.value.map(n=>n.category))].sort()),{articles:v,loading:O,progress:R,loadArticles:k,categoryList:N}}const oe={class:"category-container"},le=["disabled"],ie={key:0,disabled:"",value:""},_e=["value"],ne={key:0,class:"loading-box"},ce={class:"loading-text"},de={class:"progress-bar"},ue={key:1,class:"category-content"},me={class:"article-header"},ve={class:"article-title"},pe={class:"category-tag"},fe={class:"date-info"},ge={class:"summary"},he={key:2,class:"no-articles"},Ee={key:3,class:"pagination"},ye=["disabled"],De=["onClick"],Pe=["disabled"],C=5,Ae={__name:"CategoryList",setup(k){const v=F(),n=G(),{articles:p,loading:y,progress:E,loadArticles:A,categoryList:c}=re(),e=h(""),l=h(1);W(async()=>{await A();const s=sessionStorage.getItem("categoryPage");if(s&&(l.value=Number(s)),!v.params.category){const r=sessionStorage.getItem("currentCategory");if(r&&c.value.includes(r)){e.value=r,D();return}}i()});const i=()=>{if(!c.value.length){e.value="";return}const s=v.params.category;s&&c.value.includes(s)?e.value=s:(e.value=c.value[0],n.replace({name:"category",params:{category:e.value}}))};S(()=>v.params.category,()=>ae(i));const D=()=>{e.value&&(n.push({name:"category",params:{category:e.value}}),l.value=1,sessionStorage.setItem("currentCategory",e.value))};S(c,()=>{e.value&&!c.value.includes(e.value)&&i()});const f=g(()=>e.value?(p.value||[]).filter(s=>s.category===e.value):[]),P=g(()=>f.value.length?Math.ceil(f.value.length/C):0),w=g(()=>{const s=(l.value-1)*C;return f.value.slice(s,s+C)}),z=g(()=>Array.from({length:P.value},(s,r)=>r+1)),I=s=>{s>=1&&s<=P.value&&(l.value=s,window.scrollTo({top:0,behavior:"smooth"}))},j=()=>I(l.value-1),$=()=>I(l.value+1);return(s,r)=>{const U=X("router-link");return _(),d("div",oe,[Z(o("select",{"onUpdate:modelValue":r[0]||(r[0]=a=>e.value=a),class:"category-select",onChange:D,disabled:m(y)||!m(c).length},[m(c).length?Y("",!0):(_(),d("option",ie," 暂无分类数据 ")),(_(!0),d(L,null,V(m(c),a=>(_(),d("option",{key:a,value:a},u(a),9,_e))),128))],40,le),[[H,e.value]]),m(y)?(_(),d("div",ne,[o("div",ce,[r[1]||(r[1]=o("i",{class:"fas fa-circle-notch"},null,-1)),T(" 正在加载文章："+u(m(E))+"% ",1)]),o("div",de,[o("div",{class:"progress",style:J({width:m(E)+"%"})},null,4)])])):w.value.length?(_(),d("div",ue,[K(Q,{name:"list",tag:"div",class:"article-list"},{default:M(()=>[(_(!0),d(L,null,V(w.value,a=>(_(),ee(U,{key:a.id,to:{name:"article",params:{articleId:a.id}},class:"article-item"},{default:M(()=>[o("div",me,[o("h3",ve,u(a.title||a.id),1),o("div",pe,[r[2]||(r[2]=o("i",{class:"fas fa-tag"},null,-1)),T(" "+u(a.category),1)]),o("div",fe,[r[3]||(r[3]=o("i",{class:"far fa-calendar-alt"},null,-1)),o("span",null,u(a.date),1)])]),o("p",ge,u(a.summary),1)]),_:2},1032,["to"]))),128))]),_:1})])):(_(),d("div",he,[r[4]||(r[4]=o("i",{class:"far fa-folder-open"},null,-1)),T(" "+u(e.value==="all"?"暂无文章":`【${e.value}】分类下暂无文章`),1)])),P.value>1?(_(),d("div",Ee,[o("button",{onClick:j,disabled:l.value===1}," 上一页 ",8,ye),(_(!0),d(L,null,V(z.value,a=>(_(),d("span",{key:a,class:te(["page-btn",{active:a===l.value}]),onClick:Ie=>I(a)},u(a),11,De))),128)),o("button",{onClick:$,disabled:l.value===P.value}," 下一页 ",8,Pe)])):Y("",!0)])}}},Te=q(Ae,[["__scopeId","data-v-0ab5dc83"]]);export{Te as default};
