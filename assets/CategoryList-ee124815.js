import{av as x,aw as f,ax as w,ay as M,az as A,aA as N,o as d,c,aB as o,aC as V,aD as u,aE as B,aF as S,aG as R,aH as z,aI as O,aJ as b,aK as a,aL as Y,aM as j,aN as F}from"./index-a65202ae.js";import{f as G}from"./index-a2baa669.js";const H={name:"CategoryList",setup(){const p=f([]),i=f(!0),g=f(0),s=f(1),E=f(6);w(()=>{const e=sessionStorage.getItem("categoryPage");e&&(s.value=Number(e))}),M(s,e=>{sessionStorage.setItem("categoryPage",e)});const h=A(()=>[...p.value].sort((e,l)=>{const _=new Date(l.date)-new Date(e.date);return _!==0?_:e.title.localeCompare(l.title)})),m=A(()=>Math.ceil(h.value.length/E.value)),r=A(()=>{const e=(s.value-1)*E.value;return h.value.slice(e,e+E.value)}),I=A(()=>{const e=[],l=m.value,_=s.value;if(l<=7)for(let n=1;n<=l;n++)e.push(n);else{e.push(1),_>4&&e.push("...");const n=Math.max(2,_-1),L=Math.min(l-1,_+1);for(let t=n;t<=L;t++)e.push(t);_<l-3&&e.push("..."),e.push(l)}return e}),P=e=>{e>=1&&e<=m.value&&(s.value=e)},k=()=>P(s.value-1),C=()=>P(s.value+1);return(async()=>{i.value=!0,g.value=0;try{const e=Object.assign({"/src/articles/Csharp.md":()=>a(()=>import("./Csharp-9745b8e3.js"),[]).then(t=>t.default),"/src/articles/adb.md":()=>a(()=>import("./adb-655c4d63.js"),[]).then(t=>t.default),"/src/articles/实习总结.md":()=>a(()=>import("./实习总结-f0ec00d1.js"),[]).then(t=>t.default),"/src/articles/操作系统_1.md":()=>a(()=>import("./操作系统_1-6dee6eb8.js"),[]).then(t=>t.default),"/src/articles/操作系统_2.md":()=>a(()=>import("./操作系统_2-7f39160e.js"),[]).then(t=>t.default),"/src/articles/操作系统_3.md":()=>a(()=>import("./操作系统_3-124f61c3.js"),[]).then(t=>t.default),"/src/articles/操作系统_4.md":()=>a(()=>import("./操作系统_4-e23183d7.js"),[]).then(t=>t.default),"/src/articles/操作系统_5.md":()=>a(()=>import("./操作系统_5-88aebe04.js"),[]).then(t=>t.default),"/src/articles/球球了.md":()=>a(()=>import("./球球了-9a9756d3.js"),[]).then(t=>t.default),"/src/articles/线性代数.md":()=>a(()=>import("./线性代数-8b09059e.js"),[]).then(t=>t.default),"/src/articles/细碎知识.md":()=>a(()=>import("./细碎知识-3514ed75.js"),[]).then(t=>t.default),"/src/articles/计算机组成_1.md":()=>a(()=>import("./计算机组成_1-e2fceda2.js"),[]).then(t=>t.default),"/src/articles/计算机组成_2.md":()=>a(()=>import("./计算机组成_2-647377b6.js"),[]).then(t=>t.default),"/src/articles/计算机组成_3.md":()=>a(()=>import("./计算机组成_3-9a82acb1.js"),[]).then(t=>t.default),"/src/articles/计算机组成_4.md":()=>a(()=>import("./计算机组成_4-d370e22e.js"),[]).then(t=>t.default),"/src/articles/计算机组成_5.md":()=>a(()=>import("./计算机组成_5-f2855e27.js"),[]).then(t=>t.default),"/src/articles/计算机组成_6.md":()=>a(()=>import("./计算机组成_6-cbbc45a0.js"),[]).then(t=>t.default),"/src/articles/计算机网络_1.md":()=>a(()=>import("./计算机网络_1-3a67a6bb.js"),[]).then(t=>t.default),"/src/articles/计算机网络_3.md":()=>a(()=>import("./计算机网络_3-e1917128.js"),[]).then(t=>t.default),"/src/articles/计算机网络_4.md":()=>a(()=>import("./计算机网络_4-c81ef78b.js"),[]).then(t=>t.default),"/src/articles/计算机网络_5.md":()=>a(()=>import("./计算机网络_5-339381da.js"),[]).then(t=>t.default),"/src/articles/计算机网络_6.md":()=>a(()=>import("./计算机网络_6-c1d3ec6b.js"),[]).then(t=>t.default),"/src/articles/软件系统设计.md":()=>a(()=>import("./软件系统设计-d1a813aa.js"),[]).then(t=>t.default),"/src/articles/软件质量管理_1.md":()=>a(()=>import("./软件质量管理_1-4a727575.js"),[]).then(t=>t.default),"/src/articles/软件质量管理_2.md":()=>a(()=>import("./软件质量管理_2-df69909c.js"),[]).then(t=>t.default)}),l=Object.keys(e),_=l.length;let n=0;const L=await Promise.all(l.map(async t=>{try{const y=await e[t](),{attributes:v,body:T}=G(y),D=t.split("/").pop().replace(".md","");return y.trim().startsWith("---")?{id:D,title:v.title||D,date:v.updated?Y(v.updated).format("YYYY-MM-DD"):"未知日期",category:v.category||"未分类",summary:v.summary||T.slice(0,100)+"..."}:{id:D,title:D,date:"未知日期",category:"未分类",summary:T.slice(0,100)+"..."}}catch(y){return console.error(`加载文章失败: ${t}`,y),null}finally{n++,g.value=Math.round(n/_*100)}}));p.value=L.filter(Boolean)}catch(e){console.error("加载文章列表失败:",e)}finally{i.value=!1}})(),{articles:p,loading:i,progress:g,sortedArticles:h,paginatedArticles:r,currentPage:s,totalPages:m,pageNumbers:I,goPage:P,prevPage:k,nextPage:C}}},J={class:"category-container"},K={key:0,class:"loading-box"},W={class:"loading-text"},q={class:"progress-bar"},Q={key:1,class:"category-content"},U={class:"article-header"},X={class:"article-title"},Z={class:"category-tag"},$={class:"date-info"},tt={class:"summary"},et={key:2,class:"no-articles"},at={class:"pagination"},st=["disabled"],rt=["onClick"],ot=["disabled"];function it(p,i,g,s,E,h){const m=N("router-link");return d(),c(O,null,[o("div",J,[s.loading?(d(),c("div",K,[o("div",W,[i[2]||(i[2]=o("i",{class:"fas fa-circle-notch"},null,-1)),V(" 正在加载文章："+u(s.progress)+"% ",1)]),o("div",q,[o("div",{class:"progress",style:B({width:s.progress+"%"})},null,4)])])):s.articles.length?(d(),c("div",Q,[S(z,{name:"list",tag:"div",class:"article-list"},{default:R(()=>[(d(!0),c(O,null,b(s.paginatedArticles,r=>(d(),j(m,{key:r.id,to:{name:"article",params:{articleId:r.id}},class:"article-item"},{default:R(()=>[o("div",U,[o("h3",X,u(r.title||r.id),1),o("div",Z,[i[3]||(i[3]=o("i",{class:"fas fa-tag"},null,-1)),V(" "+u(r.category),1)]),o("div",$,[i[4]||(i[4]=o("i",{class:"far fa-calendar-alt"},null,-1)),o("span",null,u(r.date),1)])]),o("p",tt,u(r.summary),1)]),_:2},1032,["to"]))),128))]),_:1})])):(d(),c("div",et,i[5]||(i[5]=[o("i",{class:"far fa-folder-open"},null,-1),V(" 暂无文章 ")])))]),o("div",at,[o("button",{onClick:i[0]||(i[0]=(...r)=>s.prevPage&&s.prevPage(...r)),disabled:s.currentPage===1},"上一页",8,st),(d(!0),c(O,null,b(s.pageNumbers,(r,I)=>(d(),c("span",{key:I,class:F(["page-btn",{active:r===s.currentPage,ellipsis:r==="..."}]),onClick:P=>r!=="..."&&s.goPage(r)},u(r),11,rt))),128)),o("button",{onClick:i[1]||(i[1]=(...r)=>s.nextPage&&s.nextPage(...r)),disabled:s.currentPage===s.totalPages},"下一页",8,ot)])],64)}const dt=x(H,[["render",it],["__scopeId","data-v-57d00229"]]);export{dt as default};
